let gulp,config,fs,requireDir,clean;_edc‍.w("gulp",[["default",["gulp"],function(v){gulp=v}]]);_edc‍.w("./build",[["default",["config"],function(v){config=v}]]);_edc‍.w("fs",[["default",["fs"],function(v){fs=v}]]);_edc‍.w("require-dir",[["default",["requireDir"],function(v){requireDir=v}]]);_edc‍.w("gulp-clean",[["default",["clean"],function(v){clean=v}]]);





requireDir('./build/tasks');

gulp.task('production', () => {
	config.production = true;
	return config.done();
});

gulp.task('create-dist', () => {
	if (!fs.existsSync(config.dist)) {
		fs.mkdirSync(`./${config.dist}`);
	}
	if (!fs.existsSync(`${config.dist}/img`)) {
		fs.mkdirSync(`./${config.dist}/img`);
	}
	return config.done();
});

gulp.task('build-all', gulp.series(
	'create-dist',
	//'html-clean',
	'html',
	'css',
	'js',
	'iconfont',
	'assets'
));

gulp.task('build', gulp.series(
	'production',
	'build-all',
));

gulp.task('build-dev', gulp.series(
	'build-all',
));

gulp.task('dev', gulp.series(
	'build-all',
	'watch'
));

gulp.task('reset', () => {
	return gulp.src(config.dist, {read: false})
		.pipe(clean());
});
